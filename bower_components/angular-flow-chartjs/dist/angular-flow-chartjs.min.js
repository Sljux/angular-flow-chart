"use strict";function flowChartJsFactory(){function a(a,b){var c=b.chartType;if(!angular.isUndefined(c))return'<canvas class="chart chart-'+c+'" data="graphData" options="chartOptions" labels="labels" legend="legend" click="click" hover="hover" series="series" colours="colours"></canvas>'}function b(a,b,c,d){function e(a){return a?(a=a.replace(".",".value."),["elems"].concat(a.split("."),["value"])):""}function f(a,b,c){a=a.slice(-q);for(var d=Array(b.length),e=0;e<d.length;e++)d[e]=Array(a.length);return l(a,function(a,e){l(b,function(b,f){var g=k(c)?c[f]:c;d[f][e]=h(a,b,g)})}),d}function g(a,b,c){a=a.slice(-q);var d=Array(a.length);return l(a,function(a,e){d[e]=h(a,b,c)}),d}function h(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];if(!(f in a))return c;a=a[f]}return a}function i(a){for(var b=Array(a),c=0;a>c;c++)b[c]=c;return b}var j=angular.isDefined,k=angular.isArray,l=angular.forEach,m=k(a.valueProperties)?a.valueProperties:[a.valueProperties];m=m.map(e);var n=e(a.labelProperty),o=j(a.valueDefaults)?a.valueDefaults:null,p=j(a.labelDefault)?a.labelDefault:null,q=d.limit;a.graphData=[],a.labels=[],a.$on("flowChart:init",function(b,c){a.graphData=f(c,m,o),a.labels=n?g(c,n,p):i(Math.min(q,c.length))}),a.$on("flowChart:newDrop",function(b,c){var d=n?h(c,n):a.labels[a.labels.length-1]+1;a.labels.push(d),l(m,function(b,d){var e=k(o)?o[d]:o;a.graphData[d].push(h(c,b,e))}),a.graphData[0].length>q&&(l(a.graphData,function(b,c){a.graphData[c].shift()}),a.labels.shift())})}return{restrict:"E",require:"^flowChart",template:a,scope:{chartType:"@",chartOptions:"=",valueProperties:"=",valueDefaults:"=",labelProperty:"=",labelDefault:"=",series:"=",click:"=?",hover:"=?",legend:"=",colours:"=?"},link:b}}angular.module("ngFlowChartJs",["ngFlowChart"]).directive("flowChartJs",flowChartJsFactory);